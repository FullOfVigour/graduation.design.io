webpackJsonp([1],{"3fOb":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r("Dd8w"),n=r.n(o),a=r("NYxO"),i=r("AFRD"),s=r("ez7W"),l=r("Du/2"),f=["a","b","c","d","e","f","g","h","i","j","k","m","n","p","q","r","s","t","u","v","w","x","y","z","A","B","C","E","F","G","H","J","K","L","M","N","P","Q","R","S","T","W","X","Y","Z","1","2","3","4","5","6","7","8","9","0"],d={name:"",props:{width:{type:Number,default:120},height:{type:Number,default:60},wordNum:{type:Number,default:4},fontSize:{type:Number,default:40},fontStyle:{type:String,default:"Arial"}},data:function(){return{time:0}},mounted:function(){this.drawCode("canvas")},methods:{drawWord:function(t,e,r){e.font=this.fontSize+"px "+this.fontStyle;for(var o="",n=[],a=0,i=setInterval(function(){4===a?clearInterval(i):a++},1e3),s=0;s<r;s++){o+=f[parseInt(Math.random()*f.length)];var l=Math.PI/180*Math.random()*5*(Math.random()<.5?1:-1),d=0;do{n[s]=s*(this.width/r)+Math.random()*this.fontSize/2,d++}while((n[s]+this.fontSize>this.width||n[s]<this.fontSize||n[s]<(n[s-1]||0)+this.fontSize)&&d<10);var u=this.height/2;e.rotate(l),e.fillStyle=this.randomColor(),e.textBaseline="center",e.fillText(o[s],n[s],u),e.rotate(-l)}return o},drawLine:function(t,e,r){for(var o=0;o<r;o++)e.moveTo(Math.floor(Math.random()*t.width),Math.floor(Math.random()*t.height)),e.lineTo(Math.floor(Math.random()*t.width),Math.floor(Math.random()*t.height)),e.lineWidth=Math.floor(4*Math.random())+this.height/this.fontSize,e.strokeStyle=this.randomColor(),e.stroke()},drawPoint:function(t,e,r){for(var o=0;o<r;o++){e.fillStyle=this.randomColor();var n=Math.random()*t.width,a=Math.random()*t.height,i=6*Math.random();e.beginPath(),e.arc(n,a,i,2*Math.random()*Math.PI,2*Math.random()*Math.PI),e.fill()}},randomColor:function(){return"rgb("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+")"},drawCode:function(t){this.time=0;var e=document.getElementById(t),r=e.getContext("2d");r.fillStyle="#fff",r.fillRect(0,0,e.width,e.height);var o=this.drawWord(e,r,this.wordNum),n=4*Math.random()+2;this.drawLine(e,r,n);var a=10*Math.random()+20;this.drawPoint(e,r,a),this.$emit("change",o)}}},u={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("canvas",{attrs:{id:"canvas",width:t.width,height:t.height},on:{click:function(e){t.drawCode("canvas")}}})},staticRenderFns:[]};var c=r("VU/8")(d,u,!1,function(t){r("myhh")},"data-v-a2d6aee4",null).exports,h={name:"login",props:{isShow:Boolean},components:{verificationCode:c},mounted:function(){},computed:n()({},Object(a.d)(["companyName"])),data:function(){return{form:{username:"",password:"",userType:"student",verification:""},verification:"",rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],verification:[{validator:this.verificationRule,trigger:"blur"}]}}},methods:n()({},Object(a.b)(["initApp"]),Object(a.c)([l.b]),{reLogin:function(){var t=this,e={};e.loginName=this.form.username,e.password=this.form.password,this.$refs.form.validate(function(r){if(!r)return!1;Object(i.a)(),t.$callApi({api:"server_base_login",param:e}).then(function(e){Object(i.c)(e.token).then(function(){Object(s.b)(e),t.$refs.form.resetFields(),t.SET_IS_FROM_LOGIN(!0),t.initApp(e),t.$router.push({name:"main"})})})})},verificationRule:function(t,e,r){""===e?r(new Error("请输入验证码")):e.toUpperCase()!==this.verification.toUpperCase()?r(new Error("验证码错误!")):r()},onCodeChange:function(t){this.verification=t}}),beforeRouteEnter:function(t,e,r){"/main"!==e.fullPath?r():r(function(t){t.$router.push({name:e.name})})}},m={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login"},[o("div",{staticClass:"login__after"}),t._v(" "),o("transition",{attrs:{appear:"",name:"rotate"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"login__main"},[o("img",{staticClass:"login__logo",attrs:{src:r("dLd/")}}),t._v(" "),o("div",{staticClass:"login__body"},[o("div",{staticClass:"login__form"},[o("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[o("el-form-item",{staticClass:"login-username",attrs:{prop:"username"}},[o("el-input",{attrs:{placeholder:"请输入用户名"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.reLogin(e):null}},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),t._v(" "),o("el-form-item",{staticClass:"login-password",attrs:{prop:"password"}},[o("el-input",{attrs:{type:"password",placeholder:"请输入密码"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.reLogin(e):null}},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),o("el-form-item",{attrs:{prop:"type"}},[o("el-radio-group",{staticClass:"login__radio-group",model:{value:t.form.userType,callback:function(e){t.$set(t.form,"userType",e)},expression:"form.userType"}},[o("el-radio",{attrs:{label:"student"}},[t._v("学生\n                ")]),t._v(" "),o("el-radio",{attrs:{label:"teacher"}},[t._v("教师\n                ")])],1)],1),t._v(" "),o("el-form-item",{attrs:{prop:"verification"}},[o("div",{staticClass:"login-verification"},[o("el-input",{staticClass:"login-verification__input",attrs:{placeholder:"请输入验证码",maxlength:"4"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.reLogin(e):null}},model:{value:t.form.verification,callback:function(e){t.$set(t.form,"verification",e)},expression:"form.verification"}}),t._v(" "),o("verification-code",{staticClass:"login-verification__code",on:{change:t.onCodeChange}})],1)]),t._v(" "),o("el-button",{staticClass:"login-btn",attrs:{type:"primary"},on:{click:t.reLogin}},[t._v("\n              登录\n            ")])],1)],1)])])]),t._v(" "),t.isShow?o("vue-particles",{staticClass:"login__particles",attrs:{color:"#aaa",linesColor:"#fff",hoverMode:"grab",clickMode:"push",particlesNumber:30,linesWidth:2}}):t._e()],1)},staticRenderFns:[]};var p=r("VU/8")(h,m,!1,function(t){r("NFQP")},"data-v-0f90031c",null);e.default=p.exports},Dd8w:function(t,e,r){"use strict";e.__esModule=!0;var o,n=r("woOf"),a=(o=n)&&o.__esModule?o:{default:o};e.default=a.default||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}},NFQP:function(t,e){},"dLd/":function(t,e,r){t.exports=r.p+"static/img/logo.7340286.png"},ez7W:function(t,e,r){"use strict";r.d(e,"b",function(){return a}),r.d(e,"a",function(){return i});var o=r("mvHQ"),n=r.n(o),a=function(t){localStorage.setItem("BASE_DATA",n()(t))},i=function(){return JSON.parse(localStorage.getItem("BASE_DATA"))}},myhh:function(t,e){}});
//# sourceMappingURL=1.272788b9d0de36038ba2.js.map